<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ˜ìˆ  ì „ ìœ„í—˜ë„ í‰ê°€ ì‹œìŠ¤í…œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .main-content {
            padding: 40px;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .category-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .category-card.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .category-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .category-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .category-desc {
            font-size: 0.9rem;
            opacity: 0.8;
            line-height: 1.5;
        }

        .subcategory-panel {
            display: none;
            background: #f1f3f4;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }

        .subcategory-panel.show {
            display: block;
        }

        .subcategory-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .subcategory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .risk-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .risk-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .risk-item.selected {
            border-color: #28a745;
            background: #d4edda;
        }

        .checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .custom-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #667eea;
            border-radius: 4px;
            position: relative;
            cursor: pointer;
            flex-shrink: 0;
        }

        .custom-checkbox.checked {
            background: #28a745;
            border-color: #28a745;
        }

        .custom-checkbox.checked::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 12px;
        }

        .risk-label {
            font-weight: 500;
            flex-grow: 1;
        }

        .detail-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.9rem;
            display: none;
        }

        .detail-input.show {
            display: block;
        }

        .risk-summary {
            background: linear-gradient(135deg, #ff7675, #fd79a8);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
            text-align: center;
            display: none;
        }

        .risk-summary.show {
            display: block;
        }

        .risk-level {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .btn {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn-reset {
            background: linear-gradient(135deg, #fd79a8, #ff7675);
        }

        .result-panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            display: none;
        }

        .result-panel.show {
            display: block;
        }

        .consent-text {
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¥ ìˆ˜ìˆ  ì „ ìœ„í—˜ë„ í‰ê°€ ì‹œìŠ¤í…œ</h1>
            <p>ì²´ê³„ì ì¸ ìˆ˜ìˆ  ì „ ìœ„í—˜ ìš”ì†Œ í‰ê°€ ë° ë™ì˜ì„œ ìƒì„±</p>
            <button class="btn btn-reset" onclick="resetAll()">ğŸ”„ ì „ì²´ ì´ˆê¸°í™”</button>
        </div>

        <div class="main-content">
            <div class="category-grid">
                <div class="category-card" onclick="showCategory('cardiovascular')">
                    <span class="category-icon">â¤ï¸</span>
                    <div class="category-title">ì‹¬ì¥ê³„</div>
                    <div class="category-desc">ì‹¬í˜ˆê´€ ì§ˆí™˜, ë¶€ì •ë§¥, ê³ í˜ˆì•• ë“±</div>
                </div>

                <div class="category-card" onclick="showCategory('respiratory')">
                    <span class="category-icon">ğŸ«</span>
                    <div class="category-title">í˜¸í¡ê¸°ê³„</div>
                    <div class="category-desc">ì²œì‹, COPD, ê²°í•µ, íë ´ ë“±</div>
                </div>

                <div class="category-card" onclick="showCategory('endocrine')">
                    <span class="category-icon">ğŸ§¬</span>
                    <div class="category-title">ë‚´ë¶„ë¹„ê³„</div>
                    <div class="category-desc">ë‹¹ë‡¨ë³‘, ê°‘ìƒì„  ì§ˆí™˜, ë¶€ì‹  ì§ˆí™˜ ë“±</div>
                </div>

                <div class="category-card" onclick="showCategory('hepatic')">
                    <span class="category-icon">ğŸ«˜</span>
                    <div class="category-title">ê°„ì¥ê³„</div>
                    <div class="category-desc">ê°„ê²½í™”, ê°„ì—¼, ê°„ê¸°ëŠ¥ ì¥ì•  ë“±</div>
                </div>

                <div class="category-card" onclick="showCategory('renal')">
                    <span class="category-icon">ğŸ«˜</span>
                    <div class="category-title">ì‹ ì¥ê³„</div>
                    <div class="category-desc">ì‹ ë¶€ì „, íˆ¬ì„, ì „í•´ì§ˆ ë¶ˆê· í˜• ë“±</div>
                </div>

                <div class="category-card" onclick="showCategory('neurologic')">
                    <span class="category-icon">ğŸ§ </span>
                    <div class="category-title">ì‹ ê²½ê³„</div>
                    <div class="category-desc">ë‡Œì¡¸ì¤‘, ì¤‘ì¦ê·¼ë¬´ë ¥ì¦, ì²™ì¶” ì§ˆí™˜ ë“±</div>
                </div>

                <div class="category-card" onclick="showCategory('hematologic')">
                    <span class="category-icon">ğŸ©¸</span>
                    <div class="category-title">í˜ˆì•¡ê³„</div>
                    <div class="category-desc">ë¹ˆí˜ˆ, ì‘ê³ ì¥ì• , ì¶œí˜ˆ ê²½í–¥ ë“±</div>
                </div>

                <div class="category-card" onclick="showCategory('infectious')">
                    <span class="category-icon">ğŸ¦ </span>
                    <div class="category-title">ê°ì—¼</div>
                    <div class="category-desc">COVID-19, ë°œì—´, í™œë™ì„± ê°ì—¼ ë“±</div>
                </div>

                <div class="category-card" onclick="showCategory('special')">
                    <span class="category-icon">âš ï¸</span>
                    <div class="category-title">íŠ¹ìˆ˜ìƒí™©</div>
                    <div class="category-desc">ê³ ë ¹, ë¹„ë§Œ, ì„ì‹ , ì‘ê¸‰ìˆ˜ìˆ  ë“±</div>
                </div>
            </div>

            <!-- ì‹¬ì¥ê³„ -->
            <div class="subcategory-panel" id="cardiovascular-panel">
                <div class="subcategory-title">â¤ï¸ ì‹¬ì¥ê³„ ìœ„í—˜ ìš”ì†Œ</div>
                <div class="subcategory-grid">
                    <div class="risk-item" onclick="toggleRisk('valve-disease', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">íŒë§‰ì§ˆí™˜</span>
                        </div>
                        <select class="detail-input" onclick="event.stopPropagation()">
                            <option value="">ì¢…ë¥˜ ì„ íƒ</option>
                            <option value="mitral-stenosis">ìŠ¹ëª¨íŒ í˜‘ì°©</option>
                            <option value="mitral-regurgitation">ìŠ¹ëª¨íŒ ì—­ë¥˜</option>
                            <option value="aortic-stenosis">ëŒ€ë™ë§¥íŒ í˜‘ì°©</option>
                            <option value="aortic-regurgitation">ëŒ€ë™ë§¥íŒ ì—­ë¥˜</option>
                        </select>
                    </div>

                    <div class="risk-item" onclick="toggleRisk('coronary-disease', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ê´€ìƒë™ë§¥ì§ˆí™˜</span>
                        </div>
                        <select class="detail-input" onclick="event.stopPropagation()">
                            <option value="">ì¢…ë¥˜ ì„ íƒ</option>
                            <option value="stable-angina">ì•ˆì •ì„± í˜‘ì‹¬ì¦</option>
                            <option value="unstable-angina">ë¶ˆì•ˆì •ì„± í˜‘ì‹¬ì¦</option>
                            <option value="old-mi">ê³¼ê±° ì‹¬ê·¼ê²½ìƒ‰</option>
                            <option value="recent-pci">ìµœê·¼ PCI ì‹œí–‰</option>
                        </select>
                    </div>

                    <div class="risk-item" onclick="toggleRisk('arrhythmia', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ë¶€ì •ë§¥</span>
                        </div>
                        <select class="detail-input" onclick="event.stopPropagation()">
                            <option value="">ì¢…ë¥˜ ì„ íƒ</option>
                            <option value="atrial-fib">ì‹¬ë°©ì„¸ë™</option>
                            <option value="vtach">ì‹¬ì‹¤ë¹ˆë§¥</option>
                            <option value="bradycardia">ì„œë§¥</option>
                            <option value="pacemaker">ì‹¬ë°•ì¡°ìœ¨ê¸°</option>
                        </select>
                    </div>

                    <div class="risk-item" onclick="toggleRisk('heart-failure', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ì‹¬ë¶€ì „</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="EF ê°’, NYHA class ì…ë ¥" onclick="event.stopPropagation()">
                    </div>

                    <div class="risk-item" onclick="toggleRisk('hypertension', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ê³ í˜ˆì••</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="í˜ˆì•• ìˆ˜ì¹˜, ë³µìš© ì•½ë¬¼ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>
                </div>
            </div>

            <!-- í˜¸í¡ê¸°ê³„ -->
            <div class="subcategory-panel" id="respiratory-panel">
                <div class="subcategory-title">ğŸ« í˜¸í¡ê¸°ê³„ ìœ„í—˜ ìš”ì†Œ</div>
                <div class="subcategory-grid">
                    <div class="risk-item" onclick="toggleRisk('asthma', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ì²œì‹</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="ë§ˆì§€ë§‰ ë°œì‘ ì‹œê¸°, ì¡°ì ˆ ìƒíƒœ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>

                    <div class="risk-item" onclick="toggleRisk('copd', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">COPD</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="ì¤‘ì¦ë„, PFT ê²°ê³¼ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>

                    <div class="risk-item" onclick="toggleRisk('tuberculosis', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ê²°í•µ</span>
                        </div>
                        <select class="detail-input" onclick="event.stopPropagation()">
                            <option value="">ìƒíƒœ ì„ íƒ</option>
                            <option value="active">í™œë™ì„± ê²°í•µ</option>
                            <option value="suspected">ê²°í•µ ì˜ì‹¬</option>
                            <option value="old">ê³¼ê±° ê²°í•µ</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- ë‚´ë¶„ë¹„ê³„ -->
            <div class="subcategory-panel" id="endocrine-panel">
                <div class="subcategory-title">ğŸ§¬ ë‚´ë¶„ë¹„ê³„ ìœ„í—˜ ìš”ì†Œ</div>
                <div class="subcategory-grid">
                    <div class="risk-item" onclick="toggleRisk('diabetes', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ë‹¹ë‡¨ë³‘</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="HbA1c, í˜ˆë‹¹ ì¡°ì ˆ ìƒíƒœ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>

                    <div class="risk-item" onclick="toggleRisk('thyroid', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ê°‘ìƒì„  ì§ˆí™˜</span>
                        </div>
                        <select class="detail-input" onclick="event.stopPropagation()">
                            <option value="">ì¢…ë¥˜ ì„ íƒ</option>
                            <option value="hyperthyroid">ê°‘ìƒì„ ê¸°ëŠ¥í•­ì§„</option>
                            <option value="hypothyroid">ê°‘ìƒì„ ê¸°ëŠ¥ì €í•˜</option>
                            <option value="euthyroid">ì •ìƒ ê°‘ìƒì„  ê¸°ëŠ¥</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- ê°„ì¥ê³„ -->
            <div class="subcategory-panel" id="hepatic-panel">
                <div class="subcategory-title">ğŸ«˜ ê°„ì¥ê³„ ìœ„í—˜ ìš”ì†Œ</div>
                <div class="subcategory-grid">
                    <div class="risk-item" onclick="toggleRisk('elevated-lft', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ê°„ìˆ˜ì¹˜ ìƒìŠ¹</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="AST, ALT ìˆ˜ì¹˜ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>

                    <div class="risk-item" onclick="toggleRisk('liver-cirrhosis', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ê°„ê²½í™”</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="Child-Pugh score ì…ë ¥" onclick="event.stopPropagation()">
                    </div>
                </div>
            </div>

            <!-- ì‹ ì¥ê³„ -->
            <div class="subcategory-panel" id="renal-panel">
                <div class="subcategory-title">ğŸ«˜ ì‹ ì¥ê³„ ìœ„í—˜ ìš”ì†Œ</div>
                <div class="subcategory-grid">
                    <div class="risk-item" onclick="toggleRisk('ckd', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ë§Œì„±ì‹ ë¶€ì „</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="eGFR, í¬ë ˆì•„í‹°ë‹Œ ìˆ˜ì¹˜ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>

                    <div class="risk-item" onclick="toggleRisk('dialysis', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">íˆ¬ì„</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="íˆ¬ì„ ìš”ì¼, ë§ˆì§€ë§‰ íˆ¬ì„ì¼ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>
                </div>
            </div>

            <!-- ì‹ ê²½ê³„ -->
            <div class="subcategory-panel" id="neurologic-panel">
                <div class="subcategory-title">ğŸ§  ì‹ ê²½ê³„ ìœ„í—˜ ìš”ì†Œ</div>
                <div class="subcategory-grid">
                    <div class="risk-item" onclick="toggleRisk('stroke', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ë‡Œì¡¸ì¤‘</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="ë°œë³‘ ì‹œê¸°, í›„ìœ ì¦ ì •ë„ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>

                    <div class="risk-item" onclick="toggleRisk('myasthenia', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ì¤‘ì¦ê·¼ë¬´ë ¥ì¦</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="ì¦ìƒ ì •ë„, ì•½ë¬¼ ì¹˜ë£Œ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>
                </div>
            </div>

            <!-- í˜ˆì•¡ê³„ -->
            <div class="subcategory-panel" id="hematologic-panel">
                <div class="subcategory-title">ğŸ©¸ í˜ˆì•¡ê³„ ìœ„í—˜ ìš”ì†Œ</div>
                <div class="subcategory-grid">
                    <div class="risk-item" onclick="toggleRisk('anemia', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ë¹ˆí˜ˆ</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="Hb ìˆ˜ì¹˜ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>

                    <div class="risk-item" onclick="toggleRisk('no-transfusion', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ìˆ˜í˜ˆ ê±°ë¶€ (ì—¬í˜¸ì™€ì˜ ì¦ì¸)</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="ê±°ë¶€ ë²”ìœ„ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>
                </div>
            </div>

            <!-- ê°ì—¼ -->
            <div class="subcategory-panel" id="infectious-panel">
                <div class="subcategory-title">ğŸ¦  ê°ì—¼ ìœ„í—˜ ìš”ì†Œ</div>
                <div class="subcategory-grid">
                    <div class="risk-item" onclick="toggleRisk('covid19', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">COVID-19</span>
                        </div>
                        <select class="detail-input" onclick="event.stopPropagation()">
                            <option value="">ìƒíƒœ ì„ íƒ</option>
                            <option value="negative">ìŒì„±</option>
                            <option value="confirmed">í™•ì§„</option>
                            <option value="recovered">íšŒë³µ</option>
                        </select>
                    </div>

                    <div class="risk-item" onclick="toggleRisk('fever', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ë°œì—´</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="ìµœê³  ì²´ì˜¨, ë°œì—´ ì›ì¸ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>
                </div>
            </div>

            <!-- íŠ¹ìˆ˜ìƒí™© -->
            <div class="subcategory-panel" id="special-panel">
                <div class="subcategory-title">âš ï¸ íŠ¹ìˆ˜ìƒí™© ìœ„í—˜ ìš”ì†Œ</div>
                <div class="subcategory-grid">
                    <div class="risk-item" onclick="toggleRisk('emergency', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ì‘ê¸‰ìˆ˜ìˆ </span>
                        </div>
                        <input type="text" class="detail-input" placeholder="ì‘ê¸‰ ì‚¬ìœ , NPO ì‹œê°„ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>

                    <div class="risk-item" onclick="toggleRisk('obesity', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ë¹„ë§Œ</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="BMI, í‚¤, ì²´ì¤‘ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>

                    <div class="risk-item" onclick="toggleRisk('pregnancy', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ì„ì‹  (ì œì™•ì ˆê°œ)</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="ì„ì‹  ì£¼ìˆ˜, ê³¼ê±° ìˆ˜ìˆ ë ¥ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>

                    <div class="risk-item" onclick="toggleRisk('difficult-intubation', this)">
                        <div class="checkbox-wrapper">
                            <div class="custom-checkbox"></div>
                            <span class="risk-label">ê¸°ê´€ì‚½ê´€ ê³¤ë€</span>
                        </div>
                        <input type="text" class="detail-input" placeholder="MP grade, ê°œêµ¬ë„ ì…ë ¥" onclick="event.stopPropagation()">
                    </div>
                </div>
            </div>

            <div class="risk-summary" id="riskSummary">
                <div class="risk-level">ìœ„í—˜ë„: <span id="riskLevel">ì €ìœ„í—˜</span></div>
                <div>ì„ íƒëœ ìœ„í—˜ ìš”ì†Œ: <span id="selectedCount">0</span>ê°œ</div>
                <button class="btn" onclick="generateConsentForm()">ë™ì˜ì„œ ìƒì„±</button>
            </div>

            <div class="result-panel" id="resultPanel">
                <h3>ğŸ¥ ìˆ˜ìˆ  ì „ ìœ„í—˜ë„ í‰ê°€ ê²°ê³¼ ë° ë™ì˜ì„œ</h3>
                <div class="consent-text" id="consentText"></div>
                <button class="btn" onclick="copyToClipboard()">ğŸ“‹ í´ë¦½ë³´ë“œ ë³µì‚¬</button>
                <button class="btn" onclick="printResult()">ğŸ–¨ï¸ ì¸ì‡„</button>
            </div>
        </div>
    </div>

    <script>
        var selectedRisks = new Set();

        function showCategory(category) {
            // ëª¨ë“  ì¹´í…Œê³ ë¦¬ ë¹„í™œì„±í™”
            document.querySelectorAll('.category-card').forEach(function(card) {
                card.classList.remove('active');
            });
            
            // ëª¨ë“  íŒ¨ë„ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.subcategory-panel').forEach(function(panel) {
                panel.classList.remove('show');
            });
            
            // í´ë¦­ëœ ì¹´í…Œê³ ë¦¬ë¥¼ ì°¾ì•„ì„œ í™œì„±í™”
            var cards = document.querySelectorAll('.category-card');
            for (var i = 0; i < cards.length; i++) {
                var onclick = cards[i].getAttribute('onclick');
                if (onclick && onclick.includes("'" + category + "'")) {
                    cards[i].classList.add('active');
                    break;
                }
            }
            
            // í•´ë‹¹ íŒ¨ë„ ë³´ì´ê¸°
            var panel = document.getElementById(category + '-panel');
            if (panel) {
                panel.classList.add('show');
            }
        }

        function toggleRisk(riskId, element) {
            var checkbox = element.querySelector('.custom-checkbox');
            var detailInput = element.querySelector('.detail-input');
            
            if (checkbox.classList.contains('checked')) {
                checkbox.classList.remove('checked');
                element.classList.remove('selected');
                if (detailInput) {
                    detailInput.classList.remove('show');
                }
                selectedRisks.delete(riskId);
            } else {
                checkbox.classList.add('checked');
                element.classList.add('selected');
                if (detailInput) {
                    detailInput.classList.add('show');
                }
                selectedRisks.add(riskId);
            }
            
            updateRiskSummary();
        }

        function updateRiskSummary() {
            var summary = document.getElementById('riskSummary');
            var count = document.getElementById('selectedCount');
            var level = document.getElementById('riskLevel');
            
            var riskCount = selectedRisks.size;
            count.textContent = riskCount;
            
            if (riskCount === 0) {
                summary.classList.remove('show');
            } else {
                summary.classList.add('show');
                
                if (riskCount <= 2) {
                    level.textContent = 'ì €ìœ„í—˜';
                    summary.style.background = 'linear-gradient(135deg, #00b894, #00cec9)';
                } else if (riskCount <= 5) {
                    level.textContent = 'ì¤‘ë“±ë„ ìœ„í—˜';
                    summary.style.background = 'linear-gradient(135deg, #fdcb6e, #e17055)';
                } else {
                    level.textContent = 'ê³ ìœ„í—˜';
                    summary.style.background = 'linear-gradient(135deg, #ff7675, #fd79a8)';
                }
            }
        }

        function generateConsentForm() {
            // ì„ íƒëœ ìœ„í—˜ ìš”ì†Œê°€ ì—†ìœ¼ë©´ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
            if (selectedRisks.size === 0) {
                alert('ìœ„í—˜ ìš”ì†Œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            var content = '=== ìˆ˜ìˆ  ì „ ìœ„í—˜ë„ í‰ê°€ ê²°ê³¼ ===\n\n';
            content += 'í‰ê°€ì¼ì‹œ: ' + new Date().toLocaleString('ko-KR') + '\n';
            content += 'ì„ íƒëœ ìœ„í—˜ ìš”ì†Œ: ' + selectedRisks.size + 'ê°œ\n';
            var currentRiskLevel = document.getElementById('riskLevel').textContent;
            content += 'ìœ„í—˜ë„: ' + currentRiskLevel + '\n\n';
            content += '=== ìœ„í—˜ ìš”ì†Œë³„ ë™ì˜ì„œ ë‚´ìš© ===\n\n';
            
            var index = 1;
            selectedRisks.forEach(function(risk) {
                var riskTemplates = {
                    'valve-disease': 'Peri-op cardiovascular cx.(malignant arrhythmia, Myocardial Infarction, Heart Failure, Sudden Cardiac Death ë“±) ë°œìƒ ê°€ëŠ¥ì„± ë° ì´ë¡œ ì¸í•œ ICU/Ventilator care ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'coronary-disease': 'peri-postop cardiovascular cx(MI, IHD, CHF, malignant arrhythmia, sudden cardiac arrest) ë°œìƒê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'arrhythmia': 'Peri-op cardiovascular cx.(malignant arrhythmia, Myocardial Infarction, Heart Failure, Sudden Cardiac Death ë“±) ë°œìƒ ê°€ëŠ¥ì„± ë° ì´ë¡œ ì¸í•œ ICU/Ventilator care ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'heart-failure': 'Peri-op cardiovascular cx.(malignant arrhythmia, Myocardial Infarction, Heart Failure, Sudden Cardiac Death ë“±) ë°œìƒ ê°€ëŠ¥ì„± ë° ì´ë¡œ ì¸í•œ ICU/Ventilator care ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'hypertension': 'BP < 140/90ìœ¼ë¡œ ì¡°ì ˆí•˜ì„¸ìš”. ORì—ì„œ BP ì¡°ì ˆ ì•ˆë ì‹œ ìˆ˜ìˆ ì§€ì—°ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì„¤ëª…í•˜ì„¸ìš”.',
                    'asthma': 'peri-postop respiratory cx.(asthma or COPD attack, atelectasis, pneumonia, pul.edema, respi. failure) ë°œìƒ ê°€ëŠ¥ì„± ë° ì´ë¡œ ì¸í•œ ICU/ventilator care ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'copd': 'peri-postop respiratory cx.(asthma or COPD attack, atelectasis, pneumonia, pul.edema, respi. failure) ë°œìƒ ê°€ëŠ¥ì„± ë° ì´ë¡œ ì¸í•œ ICU/ventilator care ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'tuberculosis': 'Peri-op respiratory cx.(atelectasis, pneumonia,pul.edemaë“±) ë°œìƒ ê°€ëŠ¥ì„± ë° ì´ë¡œ ì¸í•œ ICU/Ventilator care ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'diabetes': 'BS 120-200ìœ¼ë¡œ strictí•˜ê²Œ ì¡°ì ˆí•˜ì„¸ìš”. BS ì¡°ì ˆë˜ì§€ ì•Šì„ì‹œ ìˆ˜ìˆ  delay ê°€ëŠ¥ì„±ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì„¸ìš”.',
                    'thyroid': 'peri-postop hemodynamic instability ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì„¤ëª…í•˜ì„¸ìš”.',
                    'elevated-lft': 'LFT f/u í•˜ê³  ê°ì†Œì¶”ì„¸ í™•ì¸í•˜ì„¸ìš”. peri-postop hepatic cx ë°œìƒê°€ëŠ¥ì„±ì— ëŒ€í•´ ì„¤ëª…í•˜ì„¸ìš”.',
                    'liver-cirrhosis': 'Peri-op hepatic Cx.(acute hepatitis, fulminent hepatitis, liver failure ë“±) ë°œìƒ ê°€ëŠ¥ì„± ë° ì´ë¡œ ì¸í•œ ICU/Ventilator care ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'ckd': 'Peri-op renal cx.(ARF, CRF ë“±) ë°œìƒ ê°€ëŠ¥ì„± ë° ì´ë¡œ ì¸í•œ ì‘ê¸‰ Hemodialysis ì‹œí–‰, ICU/Ventilator care ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'dialysis': 'peri-postop renal cx.(AKI, CKD ì•…í™”) ë°œìƒê°€ëŠ¥ì„±, ì´ë¡œ ì¸í•œ ì‘ê¸‰ hemodialysis ì‹œí–‰ ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'stroke': 'Peri-op cerebrovascular Cx.(Cerebral infartion, cerebral hemorrhage ë“±) ë°œìƒ ê°€ëŠ¥ì„± ë° ì´ë¡œ ì¸í•œ ICU/Ventilator care ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'myasthenia': 'MGì˜ ê°€ëŠ¥ì„±ì€ ì ìœ¼ë‚˜ ë§Œì•½ì˜ ê²½ìš° delayed emergence, weaning failure, cholinergic crisis ë° ì´ë¡œ ì¸í•œ ICU/Ventilator care ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'anemia': 'ê·€ê³¼ì  ìˆ˜ìˆ  ê·œëª¨ ë° ì¶œí˜ˆëŸ‰ ê³ ë ¤í•˜ì—¬ ìˆ˜í˜ˆ ë˜ëŠ” í˜ˆì•¡ì œì œ ì¤€ë¹„í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤. ì‘ê¸‰ ìˆ˜í˜ˆ ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì„¤ëª…í•˜ì„¸ìš”.',
                    'no-transfusion': 'ìˆ˜í˜ˆ ê±°ë¶€í•˜ëŠ” ë¶„ìœ¼ë¡œ ê³¼ë‹¤ì¶œí˜ˆë¡œ ì¸í•œ ë‹¤ë°œì„± ì¥ê¸° ì†ìƒ ë° ì´ë¡œ ì¸í•œ ICU/Ventilator care ê°€ëŠ¥ì„±, ì‚¬ë§ ê°€ëŠ¥ì„± ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì‹œê³  ì´ì™€ ê´€ë ¨ ë§ˆì·¨ê³¼ ìƒì˜ í›„ OP ì§„í–‰í•˜ì„¸ìš”.',
                    'covid19': 'COVID-19 ê°ì—¼ë ¥ ê´€ë ¨ ìˆ˜ìˆ  í›„ í•©ë³‘ì¦ ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì„¤ëª…í•˜ì„¸ìš”.',
                    'fever': 'ìˆ˜ìˆ ë‹¹ì¼ fever ë°œìƒì‹œ op delay ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¶©ë¶„íˆ ì„¤ëª…í•˜ì‹œê³ , ê¸°ì¡´ ì§ˆí™˜ì˜ ì•…í™” ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'emergency': 'Emergency opì˜ ìœ„í—˜ì„±, ê° ê³¼ê±°ë ¥ì— ë”°ë¥¸ peri-op complication ê°€ëŠ¥ì„± ë° ì´ë¡œ ì¸í•œ ICU/Ventilator care ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'obesity': 'Obesityë¡œ ì¸í•œ delayed emergence ë° difficult intubation ê°€ëŠ¥ì„± ì„¤ëª…í•˜ì„¸ìš”.',
                    'pregnancy': 'C/Secìœ¼ë¡œ ì „ì‹ ë§ˆì·¨, ì²™ì¶”ë§ˆì·¨, IV PCA ì— ëŒ€í•˜ì—¬ ì„¤ëª…í•˜ì˜€ìŠµë‹ˆë‹¤. Difficult intubation ê°€ëŠ¥ì„± ì„¤ëª…í•˜ê³  ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.',
                    'difficult-intubation': 'Difficult intubationê³¼ ì´ë¡œ ì¸í•œ neck, tooth injury, hypoxic brain damage, fiberoptic intubation, ì‘ê¸‰ tracheostomy, awake intubation, op delay ê°€ëŠ¥ì„± ì„¤ëª…í•˜ê³  ì¸ì§€ë™ì˜ì„œ ì‹œí–‰í•˜ì„¸ìš”.'
                };

                var items = document.querySelectorAll('.risk-item');
                for (var i = 0; i < items.length; i++) {
                    var item = items[i];
                    var onclick = item.getAttribute('onclick');
                    if (onclick && onclick.includes(risk)) {
                        var label = item.querySelector('.risk-label').textContent;
                        var input = item.querySelector('.detail-input');
                        
                        content += index + '. ' + label + '\n';
                        
                        if (input && input.classList.contains('show') && input.value) {
                            if (input.tagName === 'SELECT') {
                                var option = input.options[input.selectedIndex];
                                if (option.value) {
                                    content += '   ì„¸ë¶€ì‚¬í•­: ' + option.text + '\n';
                                }
                            } else {
                                content += '   ì„¸ë¶€ì‚¬í•­: ' + input.value + '\n';
                            }
                        }
                        
                        var template = riskTemplates[risk] || 'í•´ë‹¹ ìœ„í—˜ ìš”ì†Œì— ëŒ€í•œ ì ì ˆí•œ ì„¤ëª…ê³¼ ë™ì˜ì„œë¥¼ ì¤€ë¹„í•˜ì„¸ìš”.';
                        content += '   ' + template + '\n\n';
                        
                        index++;
                        break;
                    }
                }
            });
            
            if (currentRiskLevel === 'ì¤‘ë“±ë„ ìœ„í—˜' || currentRiskLevel === 'ê³ ìœ„í—˜') {
                content += '\n=== ì¶”ê°€ ìœ„í—˜ë„ ì•ˆë‚´ ===\n\n';
                content += 'âš ï¸ í˜„ì¬ í™˜ìì˜ ìœ„í—˜ë„ê°€ ' + currentRiskLevel + 'ë¡œ í‰ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n';
                content += 'ë‹¤ìŒ ì‚¬í•­ì— ëŒ€í•´ ì¶”ê°€ë¡œ ì¸ì§€ë™ì˜ì„œë¥¼ ë°›ì•„ì£¼ì„¸ìš”:\n\n';
                content += 'â€¢ ìˆ˜ìˆ  ë° ë§ˆì·¨ í•©ë³‘ì¦ ìœ„í—˜ì„±ì´ ì¼ë°˜ í™˜ìì— ë¹„í•´ ë†’ìŠµë‹ˆë‹¤.\n';
                content += 'â€¢ ìˆ˜ìˆ  ì¤‘ ë˜ëŠ” ìˆ˜ìˆ  í›„ ì˜ˆìƒì¹˜ ëª»í•œ í•©ë³‘ì¦ ë°œìƒ ê°€ëŠ¥ì„±ì´ ì¦ê°€í•©ë‹ˆë‹¤.\n';
                content += 'â€¢ ì¤‘í™˜ìì‹¤ ì¹˜ë£Œë‚˜ ì¸ê³µí˜¸í¡ê¸° ì¹˜ë£Œê°€ í•„ìš”í•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.\n';
                content += 'â€¢ ìˆ˜ìˆ  ì—°ê¸°ë‚˜ ì·¨ì†Œê°€ í•„ìš”í•  ìˆ˜ ìˆìœ¼ë©°, ì‘ê¸‰ìƒí™© ë°œìƒ ì‹œ ì¦‰ê°ì ì¸ ì²˜ì¹˜ê°€ ì‹œí–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n';
                content += 'â€¢ íšŒë³µ ê¸°ê°„ì´ ì—°ì¥ë  ìˆ˜ ìˆìœ¼ë©°, ì¶”ê°€ì ì¸ ì˜ë£Œ ì²˜ì¹˜ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n';
                content += 'â€¢ ìœ„í—˜ ìš”ì†Œë“¤ë¡œ ì¸í•´ ìˆ˜ìˆ  ì„±ê³µë¥ ì´ ê°ì†Œí•˜ê³  í•©ë³‘ì¦ ë°œìƒë¥ ì´ ì¦ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n';
                content += 'ìœ„ ìœ„í—˜ì„±ì— ëŒ€í•´ ì¶©ë¶„íˆ ì´í•´í•˜ì˜€ìœ¼ë©°, ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ìˆ˜ìˆ ì„ ì§„í–‰í•˜ëŠ” ê²ƒì— ë™ì˜í•©ë‹ˆë‹¤.\n\n';
            }
            
            content += '\n=== ì¼ë°˜ì ì¸ ìˆ˜ìˆ  ì „ ì£¼ì˜ì‚¬í•­ ===\n\n';
            content += 'â€¢ ìˆ˜ìˆ  ì „ ê¸ˆì‹ ì‹œê°„ì„ ì—„ê²©íˆ ì¤€ìˆ˜í•˜ì„¸ìš”.\n';
            content += 'â€¢ ë³µìš© ì¤‘ì¸ ëª¨ë“  ì•½ë¬¼ì— ëŒ€í•´ ì˜ë£Œì§„ê³¼ ìƒì˜í•˜ì„¸ìš”.\n';
            content += 'â€¢ ìˆ˜ìˆ  ë‹¹ì¼ ì²´ì˜¨, í˜ˆì••, ë§¥ë°• ë“± í™œë ¥ì§•í›„ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n';
            content += 'â€¢ ìˆ˜ìˆ  ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ í•©ë³‘ì¦ ë°œìƒ ì‹œ ì‘ê¸‰ì²˜ì¹˜ê°€ ì‹œí–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n';
            
            document.getElementById('consentText').textContent = content;
            document.getElementById('resultPanel').classList.add('show');
            document.getElementById('resultPanel').scrollIntoView({ behavior: 'smooth' });
        }

        function copyToClipboard() {
            var text = document.getElementById('consentText').textContent;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(function() {
                    alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
                });
            } else {
                var textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        function printResult() {
            var text = document.getElementById('consentText').textContent;
            var win = window.open('', '_blank');
            win.document.write('<html><head><title>ìˆ˜ìˆ  ì „ ìœ„í—˜ë„ í‰ê°€</title><style>body{font-family:monospace;margin:20px;line-height:1.6;}</style></head><body><pre>' + text + '</pre></body></html>');
            win.document.close();
            win.print();
        }

        function resetAll() {
            document.querySelectorAll('.custom-checkbox').forEach(function(checkbox) {
                checkbox.classList.remove('checked');
            });
            
            document.querySelectorAll('.risk-item').forEach(function(item) {
                item.classList.remove('selected');
                var input = item.querySelector('.detail-input');
                if (input) {
                    input.classList.remove('show');
                    input.value = '';
                }
            });
            
            document.querySelectorAll('.category-card').forEach(function(card) {
                card.classList.remove('active');
            });
            
            document.querySelectorAll('.subcategory-panel').forEach(function(panel) {
                panel.classList.remove('show');
            });
            
            selectedRisks.clear();
            updateRiskSummary();
            
            document.getElementById('resultPanel').classList.remove('show');
        }
    </script>